import{u as a}from"./db-CS3Ky50Y.js";import{_ as u,r as m,n as E,c as h,b,o as w}from"./index-CMraAo8p.js";const $=["innerHTML"],f={__name:"detail",async setup(x){let n,o,s=m();const t=new URLSearchParams(location.search).get("url");return[n,o]=E(async()=>a.loadWASM().then(async e=>{await a.loadDB("cl-main").then(c=>{const r=new e.Database(new Uint8Array(c)),i=r.exec(`SELECT name FROM t_topic tp WHERE url="${t}"`)[0].values[0],_=r.exec(`SELECT post_time FROM t_topic tp WHERE url="${t}"`)[0].values[0],l=new Date(+`${_}000`);a.loadDB(`cl-detail-${t.split("/")[2]}`).then(p=>{new e.Database(new Uint8Array(p)).exec(`SELECT content FROM t_content tc WHERE url="${t}"`)[0].values.forEach(d=>{s.value=`<h3>${i}</h3><span>${l.toLocaleDateString()} ${l.toLocaleTimeString()}</span><br><br>${d[0]}`})})})})),await n,o(),(e,c)=>(w(),h("div",{class:"content",innerHTML:b(s)},null,8,$))}},v=u(f,[["__scopeId","data-v-4db05916"]]);export{v as default};

import{r as t,q as e,o as a,b as n,u as o,v as s}from"./index-d17def95.js";import{o as r}from"./uni-app.es.a2e6451a.js";import{u as l}from"./db.22494054.js";const c=((t,e)=>{const a=t.__vccOpts||t;for(const[n,o]of e)a[n]=o;return a})({__name:"detail",setup(c){let u=t();return r((t=>{t.title&&e({title:decodeURIComponent(t.title)}),l.loadWASM().then((e=>{l.loadDB("cl-main").then((a=>{const n=new e.Database(new Uint8Array(a.data)),o=n.exec(`SELECT name FROM t_topic tp WHERE url="${t.url}"`)[0].values[0],s=n.exec(`SELECT post_time FROM t_topic tp WHERE url="${t.url}"`)[0].values[0],r=new Date(Number(`${s}000`));l.loadDB(`cl-detail-${t.url.split("/")[2]}`).then((a=>{new e.Database(new Uint8Array(a.data)).exec(`SELECT content FROM t_content tc WHERE url="${t.url}"`)[0].values.forEach((t=>{u.value=`<h3>${o}</h3><span>${r.toLocaleDateString()} ${r.toLocaleTimeString()}</span><br><br>${t[0]}`}))}))}))}))})),(t,e)=>{const r=s;return a(),n(r,{class:"content",nodes:o(u)},null,8,["nodes"])}}},[["__scopeId","data-v-61747b81"]]);export{c as default};
